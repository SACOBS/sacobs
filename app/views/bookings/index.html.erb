<%= content_for (:title) do %>
    Bookings
<% end %>
<div class="page-header">
  <h2>Bookings</h2>
  <%= link_to bookings_path, method: :post, class: 'btn btn-primary' do %>
    <%= fa_icon :plus, text: 'Make Booking' %>
  <% end %>
  <%= link_to bookings_path, class: 'btn btn-default' do %>
    <%= fa_icon :refresh, text: 'Refresh' %>
  <% end %>
</div>
<div class="search pull-right">
  <%= simple_form_for :q, url: search_bookings_path, defaults: { required: false, label: false }, html: { class: 'form-inline', method: :get, id: 'booking_search', data: { type: :html } } do |f| %>
      <%= f.input :created_at_date_eq, as: :date_picker, placeholder: 'Search booking dates' %>
      <%= f.input :reference_no_or_client_surname_cont, as: :search_box %>
      <%= f.button :submit, 'Search', class: 'btn btn-mini btn-warning' %>
      <%= link_to bookings_path, class: 'btn btn-mini btn-inverse' do %>
        <%= fa_icon :times, text: 'Clear' %>
      <% end %>
  <% end %>
</div>
<div class="tab-wrapper" id="bookings">
  <ul class="nav nav-tabs">
    <li class="active">
      <%= link_to bookings_path(type: :standby), data: { toggle: 'tab', target: '#standby' }, remote: true do %>
          Standby/Expired
        <span class="badge badge-warning">
          <%= standby_booking_count %>
        </span>
      <% end %>
    </li>
    <li>
      <%= link_to bookings_path(type: :reserved), data: { toggle: 'tab', target: '#reserved' }, remote: true do %>
        Reserved
        <span class="badge badge-info">
          <%= reserved_booking_count %>
        </span>
      <% end %>
    </li>
    <li>
      <%= link_to bookings_path(type: :paid), data: { toggle: 'tab', target: '#paid' }, remote: true do %>
          Paid
        <span class="badge badge-success">
          <%= paid_booking_count %>
        </span>
      <% end %>
    </li>
    <li>
      <%= link_to bookings_path(type: :cancelled) ,data: { toggle: 'tab', target: '#cancelled' }, remote: true do %>
          Cancelled
        <span class="badge badge-important">
          <%= cancelled_booking_count %>
        </span>
      <% end %>
    </li>
  </ul>
  <div class="tab-content">
    <div class="tab-pane" id="reserved" data-type="reserved"></div>
    <div class="tab-pane active" id="standby" data-type="standby">
      <%= render 'bookings/bookings', bookings: @bookings, type: params[:type] %>
    </div>
    <div class="tab-pane" id="paid" data-type="paid"></div>
    <div class="tab-pane" id="cancelled" data-type="cancelled"></div>
  </div>
</div>

<br/>
<%= link_to bookings_path, method: :post, class: 'btn btn-primary' do %>
    <%= fa_icon :plus, text: 'Make Booking' %>
<% end %>
<%= link_to bookings_path, class: 'btn btn-default' do %>
    <%= fa_icon :refresh, text: 'Refresh' %>
<% end %>