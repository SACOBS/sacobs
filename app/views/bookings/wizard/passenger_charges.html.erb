<%= content_for (:title) do %>
  Booking Wizard - Passenger charges
<% end %>
<%= content_for (:actions) do %>
  <%= link_to 'Back', previous_wizard_path, class: 'btn btn-default' %>
  <%= link_to 'Cancel', booking_path(@booking), method: :delete, class: 'btn btn-danger' %>
<% end %>
<div class='col-md-12'>
  <%= simple_form_for @booking, url: wizard_path, method: :patch do |f| %>
    <div class="form-group">
      <%= f.button :submit, 'Next (alt + n)', autofocus: true, accesskey: 'n', class: 'btn btn-success' %>
    </div>
    <%= f.fields_for :passengers do |p| %>
      <h5><%= p.object.full_name %> (<%= p.object.passenger_type.description.titleize %>)</h5>
      <% Charge.all.each do |c| %>
        <%= label_tag 'charge', c.description, class: 'checkbox' do %>
          <%= check_box_tag "booking[passengers_attributes][#{p.options[:child_index]}]charges[]", c.id, p.object.charges.include?(c), id: dom_id(c) %>
          <%= c.description %>
        <% end %>
      <% end %>
      <hr/>
    <% end %>
    <div class="form-group">
      <%= f.button :submit, 'Next (alt + n)', autofocus: true, accesskey: 'n', class: 'btn btn-success' %>
    </div>
  <% end %>
</div>
